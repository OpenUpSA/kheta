# Gatsby

**Gatsby is a [React](https://reactjs.org) based, [GraphQL](https://graphql.org/) powered, [static site generator](https://en.wikipedia.org/wiki/Web_template_system#Static_site_generators).** 

Gatsby uses React to drive both static-generated page templating and dynamically loaded JavaScript content. This means that the project uses the same language ([JavaScript](https://developer.mozilla.org/bm/docs/Web/JavaScript)) for both static templating and in-page interactivity. Gatsby also abstracts away a lot of configuration and boilerplate (for example [Webpack](https://webpack.js.org/) and [Babel](https://babeljs.io/)) usually associated with modern JavaScript projects, thereby providing a more unified/ready-to-go React architecture.

However, in addition to the above, keep in mind that (due to the fact that we are only delivering static assets) any custom server-side functionality/logic (if required) should be added either as a [Netlify function](https://www.netlify.com/docs/functions/) or via a decoupled API endpoint connected to a server (which might require coordination with a back-end developer).

## Configuration

The base [Gatsby](https://www.gatsbyjs.org/) configuration is extended as follows:

|Name|Purpose|
|---|---|
|[gatsby‑plugin‑manifest](https://www.npmjs.com/package/gatsby-plugin-manifest)|Creates a [web app manifest file](https://developer.mozilla.org/en-US/docs/Web/Manifest) based on values passed in `src/tooling/gatsby‑config/manifestConfig.js`. This is required for basic [progressive web app](https://developer.mozilla.org/en-US/docs/Web/Apps/Progressive) behaviour.|
|[gatsby‑plugin‑offline](https://www.npmjs.com/package/gatsby-plugin-offline)|Creates and automatically updates a [service worker](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API) file every time `npm run build` runs. This ensures that new content can be synced locally by browsers to reduce mobile data costs and mitigate the negative user experience of unreliable internet connectivity (or even allow complete offline usage of the app).|
|[gatsby‑plugin‑material‑ui](@wapps/gatsby-plugin-material-ui)| Adds [Material UI](#material-ui) component styling during static page generation. This means that static-generated Gatsby files have [Material UI](#material-ui) styles applied inline before JavaScript loads client-side. Otherwise, the styling would only kick in once JavaScript runs.
|[gatsby‑plugin‑styled‑components](https://www.npmjs.com/package/gatsby-plugin-styled-components)| Adds custom [Styled Components](https://www.styled-components.com/) styling (useful for overriding default Material UI styling) during static page generation . This means that static-generated Gatsby files have CSS rules written in [Styled Components](https://www.styled-components.com/) applied inline before JavaScript loads client-side. Otherwise, the styling would only kick in once JavaScript runs. |
|[gatsby‑plugin‑react‑helmet](https://www.npmjs.com/package/gatsby-plugin-react-helmet)|Adds [react-helmet](https://www.npmjs.com/package/react-helmet) integration for static-generated Gatsby files. This means that `<helmet>` information is already present in files before JavaScript loads.|
|[gatsby‑plugin‑hotjar](https://www.npmjs.com/package/gatsby-plugin-hotjar)| Automatically adds the required Hotjar script to each page (if config is supplied). No further integration is needed once the `HOTJAR_ID` and `HOTJAR_SNIPPET_VERSION` [environment variables]((https://www.netlify.com/docs/continuous-deployment/#build-environment-variables)) are added to [Netlify](#netlify). To learn more about this project's Hotjar integration you can skip directly to the [Hotjar](https://pocketreporter-docs.netlify.com/docs-markdown-integrations#hotjar) in the ['Intergrations' section of the docs](https://pocketreporter-docs.netlify.com/docs-markdown-integrations). |
|[gatsby‑plugin‑google‑analytics](https://www.npmjs.com/package/gatsby-plugin-google-analytics)|Automatically inserts a Google Analytics initialisation script in each page. Apart from initialising GA (needed for [custom event tracking](https://developers.google.com/analytics/devguides/collection/analyticsjs/events)), it also automatically sends 'pageview' events to GA each time a Gatsby 'page' is viewed. Note that [react-ga](https://www.npmjs.com/package/react-ga) has also been included in this project for custom event tracking. However since this plugin already initialised GA, be mindful not to initialise GA again when using `react-ga`. To learn more about this project's Hotjar integration you can skip directly to the [Google Analytics](https://pocketreporter-docs.netlify.com/docs-markdown-integrations#analytics) in the ['Intergrations' section of the docs](https://pocketreporter-docs.netlify.com/docs-markdown-integrations).
|[gatsby‑plugin‑sentry](https://www.npmjs.com/package/gatsby-plugin-sentry)|Automatically adds the required Sentry remote error-tracking script to each page. This means that `Sentry` is now available in the `window` global scope. This plugin only initialises Sentry in your project. You need to manually add Sentry events via the `Sentry` object. Uses [Raven.js](https://www.npmjs.com/package/raven-js) under the hood. To learn more about this project's Hotjar integration you can skip directly to the [Sentry](https://pocketreporter-docs.netlify.com/docs-markdown-integrations#sentry) in the ['Intergrations' section of the docs](https://pocketreporter-docs.netlify.com/docs-markdown-integrations)

In addition to the above plugins, [Redux](#redux) is manually integrated into Gatsby via the `wrapRootElement` hook in `/config-browser.js` and `/config-ssr.js`. This exposes the [Redux Store](https://redux.js.org/api/store) via a [Provider](https://react-redux.js.org/api/provider) at the root of both the client-side JavaScript and the build process that compiles all static-generated Gatsby files. Meaning that queries can be made to the store regardless of the environment.